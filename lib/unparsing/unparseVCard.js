"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _foldline=_interopRequireDefault(require("foldline"));var _util=require("../util");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}const toProp=(lineName,version)=>([propName,propValue])=>{if(version==="2.1"){if(["TEL","ADR","EMAIL"].includes(lineName))return(0,_util).capitalDashCase(propValue.join(";"));return(0,_util).capitalDashCase(propName)+"="+(0,_util).capitalDashCase(propValue.join(";"))}if(version==="3.0")return(0,_util).capitalDashCase(propName)+"="+(0,_util).capitalDashCase(propValue.join(","));if(version==="4.0")return(0,_util).capitalDashCase(propName)+"="+propValue.join(",");throw"among us!"};const toLine=version=>([name,i])=>{const{value,props,group}=i;const lineName=(0,_util).capitalDashCase(name);const propStr=Object.entries(props).map(toProp(lineName,version)).join(";");const joinedProps=propStr?";"+propStr:"";const groupStr=group?group+".":"";const foldedValue=version==="2.1"?value:(0,_foldline).default(value,75,false);const newValue=lineName==="VERSION"?version:foldedValue;return groupStr+lineName+joinedProps+":"+newValue};function unparseVCard(maggus,version){const begin="BEGIN:VCARD";const content=Object.entries(maggus).reduce(_util.seperateSameValues,[]).map(toLine(version));const end="END:VCARD";const result=[begin,...content,end].join("\n");return result}var _default=unparseVCard;exports.default=_default
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91bnBhcnNpbmcvdW5wYXJzZVZDYXJkLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmb2xkbGluZSBmcm9tIFwiZm9sZGxpbmVcIjtcblxuaW1wb3J0IHsgY2FwaXRhbERhc2hDYXNlLCBzZXBlcmF0ZVNhbWVWYWx1ZXMgfSBmcm9tIFwiLi4vdXRpbFwiO1xuXG5pbXBvcnQgeyBWY2ZWZXJzaW9uIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5cbmNvbnN0IHRvUHJvcCA9XG4gIChsaW5lTmFtZTogc3RyaW5nLCB2ZXJzaW9uOiBzdHJpbmcpID0+XG4gIChbcHJvcE5hbWUsIHByb3BWYWx1ZV06IFthbnksIGFueV0pID0+IHtcbiAgICBpZiAodmVyc2lvbiA9PT0gXCIyLjFcIikge1xuICAgICAgaWYgKFtcIlRFTFwiLCBcIkFEUlwiLCBcIkVNQUlMXCJdLmluY2x1ZGVzKGxpbmVOYW1lKSlcbiAgICAgICAgcmV0dXJuIGNhcGl0YWxEYXNoQ2FzZShwcm9wVmFsdWUuam9pbihcIjtcIikpO1xuXG4gICAgICByZXR1cm4gKFxuICAgICAgICBjYXBpdGFsRGFzaENhc2UocHJvcE5hbWUpICsgXCI9XCIgKyBjYXBpdGFsRGFzaENhc2UocHJvcFZhbHVlLmpvaW4oXCI7XCIpKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAodmVyc2lvbiA9PT0gXCIzLjBcIilcbiAgICAgIHJldHVybiAoXG4gICAgICAgIGNhcGl0YWxEYXNoQ2FzZShwcm9wTmFtZSkgKyBcIj1cIiArIGNhcGl0YWxEYXNoQ2FzZShwcm9wVmFsdWUuam9pbihcIixcIikpXG4gICAgICApO1xuXG4gICAgaWYgKHZlcnNpb24gPT09IFwiNC4wXCIpXG4gICAgICByZXR1cm4gY2FwaXRhbERhc2hDYXNlKHByb3BOYW1lKSArIFwiPVwiICsgcHJvcFZhbHVlLmpvaW4oXCIsXCIpO1xuXG4gICAgdGhyb3cgXCJhbW9uZyB1cyFcIjtcbiAgfTtcblxuY29uc3QgdG9MaW5lID1cbiAgKHZlcnNpb246IHN0cmluZykgPT5cbiAgKFtuYW1lLCBpXTogW2FueSwgYW55XSkgPT4ge1xuICAgIGNvbnN0IHsgdmFsdWUsIHByb3BzLCBncm91cCB9ID0gaTtcblxuICAgIGNvbnN0IGxpbmVOYW1lID0gY2FwaXRhbERhc2hDYXNlKG5hbWUpO1xuXG4gICAgY29uc3QgcHJvcFN0ciA9IE9iamVjdC5lbnRyaWVzKHByb3BzKVxuICAgICAgLm1hcCh0b1Byb3AobGluZU5hbWUsIHZlcnNpb24pKVxuICAgICAgLmpvaW4oXCI7XCIpO1xuXG4gICAgY29uc3Qgam9pbmVkUHJvcHMgPSBwcm9wU3RyID8gXCI7XCIgKyBwcm9wU3RyIDogXCJcIjtcbiAgICBjb25zdCBncm91cFN0ciA9IGdyb3VwID8gZ3JvdXAgKyBcIi5cIiA6IFwiXCI7XG5cbiAgICBjb25zdCBmb2xkZWRWYWx1ZSA9IHZlcnNpb24gPT09IFwiMi4xXCIgPyB2YWx1ZSA6IGZvbGRsaW5lKHZhbHVlLCA3NSwgZmFsc2UpO1xuXG4gICAgY29uc3QgbmV3VmFsdWUgPSBsaW5lTmFtZSA9PT0gXCJWRVJTSU9OXCIgPyB2ZXJzaW9uIDogZm9sZGVkVmFsdWU7XG5cbiAgICByZXR1cm4gZ3JvdXBTdHIgKyBsaW5lTmFtZSArIGpvaW5lZFByb3BzICsgXCI6XCIgKyBuZXdWYWx1ZTtcbiAgfTtcblxuZnVuY3Rpb24gdW5wYXJzZVZDYXJkKG1hZ2d1czogYW55LCB2ZXJzaW9uOiBWY2ZWZXJzaW9uKTogc3RyaW5nIHtcbiAgY29uc3QgYmVnaW4gPSBcIkJFR0lOOlZDQVJEXCI7XG5cbiAgY29uc3QgY29udGVudCA9IE9iamVjdC5lbnRyaWVzKG1hZ2d1cylcbiAgICAucmVkdWNlKHNlcGVyYXRlU2FtZVZhbHVlcywgW10pXG4gICAgLm1hcCh0b0xpbmUodmVyc2lvbikpO1xuXG4gIGNvbnN0IGVuZCA9IFwiRU5EOlZDQVJEXCI7XG5cbiAgY29uc3QgcmVzdWx0ID0gW2JlZ2luLCAuLi5jb250ZW50LCBlbmRdLmpvaW4oXCJcXG5cIik7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmV4cG9ydCBkZWZhdWx0IHVucGFyc2VWQ2FyZDtcbiJdLCJuYW1lcyI6WyJ0b1Byb3AiLCJsaW5lTmFtZSIsInZlcnNpb24iLCJwcm9wTmFtZSIsInByb3BWYWx1ZSIsImluY2x1ZGVzIiwiY2FwaXRhbERhc2hDYXNlIiwiam9pbiIsInRvTGluZSIsIm5hbWUiLCJpIiwidmFsdWUiLCJwcm9wcyIsImdyb3VwIiwicHJvcFN0ciIsIk9iamVjdCIsImVudHJpZXMiLCJtYXAiLCJqb2luZWRQcm9wcyIsImdyb3VwU3RyIiwiZm9sZGVkVmFsdWUiLCJmb2xkbGluZSIsIm5ld1ZhbHVlIiwidW5wYXJzZVZDYXJkIiwibWFnZ3VzIiwiYmVnaW4iLCJjb250ZW50IiwicmVkdWNlIiwic2VwZXJhdGVTYW1lVmFsdWVzIiwiZW5kIiwicmVzdWx0Il0sIm1hcHBpbmdzIjoiQUFBQSw0RkFBcUIsS0FBQSxTQUFVLGdDQUFWLFVBQVUsRUFBQSxBQUVxQixLQUFBLEtBQVMsU0FBVCxTQUFTLENBQUEsbUZBSTdELE1BQU1BLE1BQU0sQ0FDVixDQUFDQyxRQUFnQixDQUFFQyxPQUFlLEdBQ2xDLENBQUMsQ0FBQ0MsUUFBUSxDQUFFQyxTQUFTLENBQWEsR0FBSyxDQUNyQyxHQUFJRixPQUFPLEdBQUssS0FBSyxDQUFFLENBQ3JCLEdBQUksQ0FBQyxLQUFLLENBQUUsS0FBSyxDQUFFLE9BQU8sQ0FBQyxDQUFDRyxRQUFRLENBQUNKLFFBQVEsQ0FBQyxDQUM1QyxNQUFPSyxDQUFBQSxFQUFBQSxLQUFlLEFBQXFCLENBQUEsZ0JBQXJCLENBQUNGLFNBQVMsQ0FBQ0csSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEFBQUMsQUFFOUMsT0FDRUQsQ0FBQUEsRUFBQUEsS0FBZSxBQUFVLENBQUEsZ0JBQVYsQ0FBQ0gsUUFBUSxDQUFDLENBQUcsR0FBRyxDQUFHRyxDQUFBQSxFQUFBQSxLQUFlLEFBQXFCLENBQUEsZ0JBQXJCLENBQUNGLFNBQVMsQ0FBQ0csSUFBSSxDQUFDLEdBQUcsQ0FBQyxD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