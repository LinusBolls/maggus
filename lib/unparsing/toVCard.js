"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _util=require("../util");function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}const toProp=(lineName,version)=>([propName,propValue])=>{if(["TEL","ADR","EMAIL"].includes(lineName)&&version==="2.1")return propValue.join(";");return(0,_util).capitalDashCase(propName)+"="+(0,_util).capitalDashCase(propValue.join(","))};const toLine=version=>([name,i])=>{const{value,props}=i;const{group}=props,restProps=_objectWithoutPropertiesLoose(props,["group"]);const lineName=(group?group+".":"")+(0,_util).capitalDashCase(name);const propStr=Object.entries(restProps).map(toProp(lineName,version)).join(";");const joinedProps=propStr?";"+propStr:"";const propsStr=["2.1","3.0"].includes(version)?joinedProps.toUpperCase():joinedProps;return lineName+propsStr+":"+value};const seperateSameValues=(prev,[name,values])=>[...prev,...values.map(i=>[name,i]),];function toVCard(maggus,version){const begin="BEGIN:VCARD";const content=Object.entries(maggus).reduce(seperateSameValues,[]).map(toLine(version));const end="END:VCARD";const result=[begin,...content,end].join("\n");return result}var _default=toVCard;exports.default=_default
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91bnBhcnNpbmcvdG9WQ2FyZC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjYXBpdGFsRGFzaENhc2UgfSBmcm9tIFwiLi4vdXRpbFwiO1xuXG5pbXBvcnQgeyBWY2ZGb3JtYXRFcnJvciwgVmNmVmVyc2lvbkVycm9yLCBWY2ZWZXJzaW9uIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5cbmNvbnN0IHRvUHJvcCA9XG4gIChsaW5lTmFtZTogc3RyaW5nLCB2ZXJzaW9uOiBzdHJpbmcpID0+XG4gIChbcHJvcE5hbWUsIHByb3BWYWx1ZV06IGFueSkgPT4ge1xuICAgIGlmIChbXCJURUxcIiwgXCJBRFJcIiwgXCJFTUFJTFwiXS5pbmNsdWRlcyhsaW5lTmFtZSkgJiYgdmVyc2lvbiA9PT0gXCIyLjFcIilcbiAgICAgIHJldHVybiBwcm9wVmFsdWUuam9pbihcIjtcIik7XG5cbiAgICByZXR1cm4gKFxuICAgICAgY2FwaXRhbERhc2hDYXNlKHByb3BOYW1lKSArIFwiPVwiICsgY2FwaXRhbERhc2hDYXNlKHByb3BWYWx1ZS5qb2luKFwiLFwiKSlcbiAgICApO1xuICB9O1xuXG5jb25zdCB0b0xpbmUgPVxuICAodmVyc2lvbjogc3RyaW5nKSA9PlxuICAoW25hbWUsIGldKSA9PiB7XG4gICAgY29uc3QgeyB2YWx1ZSwgcHJvcHMgfSA9IGk7XG5cbiAgICBjb25zdCB7IGdyb3VwLCAuLi5yZXN0UHJvcHMgfSA9IHByb3BzO1xuXG4gICAgY29uc3QgbGluZU5hbWUgPSAoZ3JvdXAgPyBncm91cCArIFwiLlwiIDogXCJcIikgKyBjYXBpdGFsRGFzaENhc2UobmFtZSk7XG5cbiAgICBjb25zdCBwcm9wU3RyID0gT2JqZWN0LmVudHJpZXMocmVzdFByb3BzKVxuICAgICAgLm1hcCh0b1Byb3AobGluZU5hbWUsIHZlcnNpb24pKVxuICAgICAgLmpvaW4oXCI7XCIpO1xuXG4gICAgY29uc3Qgam9pbmVkUHJvcHMgPSBwcm9wU3RyID8gXCI7XCIgKyBwcm9wU3RyIDogXCJcIjtcblxuICAgIGNvbnN0IHByb3BzU3RyID0gW1wiMi4xXCIsIFwiMy4wXCJdLmluY2x1ZGVzKHZlcnNpb24pXG4gICAgICA/IGpvaW5lZFByb3BzLnRvVXBwZXJDYXNlKClcbiAgICAgIDogam9pbmVkUHJvcHM7XG5cbiAgICByZXR1cm4gbGluZU5hbWUgKyBwcm9wc1N0ciArIFwiOlwiICsgdmFsdWU7XG4gIH07XG5cbi8qKlxuICogQGRlc2MgdXNlZCB0byBzZXBlcmF0ZSB0aGUgbmVzdGVkIGpzb24gcmVwcmVzZW50YXRpb24gaW50byBtdWx0aXBsZSBsaW5lcyxcbiAqIGZvciBleGFtcGxlIG11bHRpcGxlIHBob25lIG51bWJlcnNcbiAqL1xuY29uc3Qgc2VwZXJhdGVTYW1lVmFsdWVzID0gKHByZXYsIFtuYW1lLCB2YWx1ZXNdKSA9PiBbXG4gIC4uLnByZXYsXG4gIC4uLnZhbHVlcy5tYXAoKGkpID0+IFtuYW1lLCBpXSksXG5dO1xuXG5mdW5jdGlvbiB0b1ZDYXJkKG1hZ2d1czogYW55LCB2ZXJzaW9uOiBWY2ZWZXJzaW9uKTogc3RyaW5nIHtcbiAgY29uc3QgYmVnaW4gPSBcIkJFR0lOOlZDQVJEXCI7XG5cbiAgY29uc3QgY29udGVudCA9IE9iamVjdC5lbnRyaWVzKG1hZ2d1cylcbiAgICAucmVkdWNlKHNlcGVyYXRlU2FtZVZhbHVlcywgW10pXG4gICAgLm1hcCh0b0xpbmUodmVyc2lvbikpO1xuXG4gIGNvbnN0IGVuZCA9IFwiRU5EOlZDQVJEXCI7XG5cbiAgY29uc3QgcmVzdWx0ID0gW2JlZ2luLCAuLi5jb250ZW50LCBlbmRdLmpvaW4oXCJcXG5cIik7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmV4cG9ydCBkZWZhdWx0IHRvVkNhcmQ7XG4iXSwibmFtZXMiOlsidG9Qcm9wIiwibGluZU5hbWUiLCJ2ZXJzaW9uIiwicHJvcE5hbWUiLCJwcm9wVmFsdWUiLCJpbmNsdWRlcyIsImpvaW4iLCJjYXBpdGFsRGFzaENhc2UiLCJ0b0xpbmUiLCJuYW1lIiwiaSIsInZhbHVlIiwicHJvcHMiLCJncm91cCIsInJlc3RQcm9wcyIsInByb3BTdHIiLCJPYmplY3QiLCJlbnRyaWVzIiwibWFwIiwiam9pbmVkUHJvcHMiLCJwcm9wc1N0ciIsInRvVXBwZXJDYXNlIiwic2VwZXJhdGVTYW1lVmFsdWVzIiwicHJldiIsInZhbHVlcyIsInRvVkNhcmQiLCJtYWdndXMiLCJiZWdpbiIsImNvbnRlbnQiLCJyZWR1Y2UiLCJlbmQiLCJyZXN1bHQiXSwibWFwcGluZ3MiOiJBQUFBLDRGQUFnQyxLQUFBLEtBQVMsU0FBVCxTQUFTLENBQUEsMlFBSXpDLE1BQU1BLE1BQU0sQ0FDVixDQUFDQyxRQUFnQixDQUFFQyxPQUFlLEdBQ2xDLENBQUMsQ0FBQ0MsUUFBUSxDQUFFQyxTQUFTLENBQU0sR0FBSyxDQUM5QixHQUFJLENBQUMsS0FBSyxDQUFFLEtBQUssQ0FBRSxPQUFPLENBQUMsQ0FBQ0MsUUFBUSxDQUFDSixRQUFRLENBQUMsRUFBSUMsT0FBTyxHQUFLLEtBQUssQ0FDakUsT0FBT0UsU0FBUyxDQUFDRSxJQUFJLENBQUMsR0FBRyxDQUFDLEFBQUMsQUFFN0IsT0FDRUMsQ0FBQUEsRUFBQUEsS0FBZSxBQUFVLENBQUEsZ0JBQVYsQ0FBQ0osUUFBUSxDQUFDLENBQUcsR0FBRyxDQUFHSSxDQUFBQSxFQUFBQSxLQUFlLEFBQXFCLENBQUEsZ0JBQXJCLENBQUNILFNBQVMsQ0FBQ0UsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEFBQ3RFLENBQ0gsQUFBQyxBQUVKLE9BQU1FLE1BQU0sQ0FDVixBQUFDTixPQUFlLEVBQ2hCLENBQUMsQ0FBQ08sSUFBSSxDQUFFQyxDQUFDLENBQUMsR0FBSyxDQUNiLEtBQU0sQ0FBRUMsS0FBSyxDQUFFQyxLQUFLLENBQUUsQ0FBR0YsQ0FBQyxBQUFDLEFBRTNCLE1BQU0sQ0FBRUcsS0FBSyxDQUFnQixDQUFHRCxLQUFLLENBQW5CRSxTQUFTLCtCQUFLRixLQUFLLEVBQTdCQyxPQUFLLEVBQXlCLEFBRXRDLE9BQU1aLFFBQVEsQ0FBRyxDQUFDWSxLQUFLLENBQUdBLEtBQUssQ0FBRyxHQUFHLENBQUcsRUFBRSxDQUFDLENBQUdOLENBQUFBLEVBQUFBLEtBQWUsQUFBTSxDQUFBLGdCQUFOLENBQUNFLElBQUksQ0FBQyxBQUFDLEFBRXBFLE9BQU1NLE9BQU8sQ0FBR0MsTUFBTSxDQUFDQyxPQUFPLENBQUNILFNBQVMsQ0FBQyxDQUN0Q0ksR0FBRyxDQUFDbEIsTUFBTSxDQUFDQyxRQUFRLENBQUVDLE9BQU8sQ0FBQyxDQUFDLENBQzlCSSxJQUFJLENBQUMsR0FBRyxDQUFDLEFBQUMsQUFFYixPQUFNYSxXQUFXLENBQUdKLE9BQU8sQ0FBRyxHQUFHLENBQUdBLE9BQU8sQ0FBRyxFQUFFLEFBQUMsQUFFakQsT0FBTUssUUFBUSxDQUFHLENBQUMsS0FBSyxDQUFFLEtBQUssQ0FBQyxDQUFDZixRQUFRLENBQUNILE9BQU8sQ0FBQyxDQUM3Q2lCLFdBQVcsQ0FBQ0UsV0FBVyxFQUFFLENBQ3pCRixXQUFXLEFBQUMsQUFFaEIsUUFBT2xCLFFBQVEsQ0FBR21CLFFBQVEsQ0FBRyxHQUFHLENBQUdULEtBQUssQUFBQyxDQUMxQyxBQUFDLEFBTUosT0FBTVcsa0JBQWtCLENBQUcsQ0FBQ0MsSUFBSSxDQUFFLENBQUNkLElBQUksQ0FBRWUsTUFBTSxDQUFDLEdBQUssSUFDaERELElBQUksSUFDSkMsTUFBTSxDQUFDTixHQUFHLENBQUMsQUFBQ1IsQ0FBQyxFQUFLLENBQUNELElBQUksQ0FBRUMsQ0FBQyxDQUFDLENBQUMsRUFDaEMsQUFBQyxBQUVGLFVBQVNlLE9BQU8sQ0FBQ0MsTUFBVyxDQUFFeEIsT0FBbUIsQ0FBVSxDQUN6RCxNQUFNeUIsS0FBSyxDQUFHLGFBQWEsQUFBQyxBQUU1QixPQUFNQyxPQUFPLENBQUdaLE1BQU0sQ0FBQ0MsT0FBTyxDQUFDUyxNQUFNLENBQUMsQ0FDbkNHLE1BQU0sQ0FBQ1Asa0JBQWtCLENBQUUsRUFBRSxDQUFDLENBQzlCSixHQUFHLENBQUNWLE1BQU0sQ0FBQ04sT0FBTyxDQUFDLENBQUMsQUFBQyxBQUV4QixPQUFNNEIsR0FBRyxDQUFHLFdBQVcsQUFBQyxBQUV4QixPQUFNQyxNQUFNLENBQUcsQ0FBQ0osS0FBSyxJQUFLQyxPQUFPLENBQUVFLEdBQUcsQ0FBQyxDQUFDeEIsSUFBSSxDQUFDLElBQUksQ0FBQyxBQUFDLEFBRW5ELFFBQU95QixNQUFNLEFBQUMsQ0FDZixhQUNjTixPQUFPLHlCQUFDIn0=